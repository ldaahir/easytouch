var X=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var E=(e,u,l)=>u in e?X(e,u,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[u]=l,V=(e,u)=>{for(var l in u||(u={}))le.call(u,l)&&E(e,l,u[l]);if(R)for(var l of R(u))ae.call(u,l)&&E(e,l,u[l]);return e},M=(e,u)=>Z(e,ee(u));import{m as te,V as U}from"./VTextField-ae5a2228.js";import{f as ne}from"./forwardRefs-bb5e4b03.js";import{a0 as oe,W as ue,aJ as se,J as ie,U as re,$ as ce,Y as A,T as de,az as fe,a4 as me}from"./index-e1b913cd.js";import{m as ve,u as pe,V as he,a as K}from"./VList-5632fe53.js";import{m as ye}from"./transition-6a62c7af.js";import{b as Ve}from"./VInput-ea621834.js";import{V as ke}from"./dialog-transition-40895cfb.js";import{V as Ce}from"./VMenu-71a8a06d.js";import{V as ge}from"./VCheckboxBtn-fb30a6d7.js";import{V as we}from"./VChip-a66962cb.js";import{f as b,c as T,k as r,M as xe,n as g,Q as De}from"./frappe-ui-26ef7369.js";const Pe=oe(V({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:se}},ve({itemChildren:!1})),"v-select"),Ue=ie()({name:"VSelect",props:V(V(V({},Pe()),re(te({modelValue:null}),["validationValue","dirty","appendInnerIcon"])),ye({transition:{component:ke}})),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,u){let{slots:l}=u;const{t:N}=ce(),I=b(),S=b(),F=A(e,"menu"),c=T({get:()=>F.value,set:a=>{var n;F.value&&!a&&((n=S.value)!=null&&n.Î¨openChildren)||(F.value=a)}}),{items:k,transformIn:$,transformOut:H}=pe(e),s=A(e,"modelValue",[],a=>$(me(a)),a=>{var i;const n=H(a);return e.multiple?n:(i=n[0])!=null?i:null}),h=Ve(),w=T(()=>s.value.map(a=>k.value.find(n=>e.valueComparator(n.value,a.value))||a)),_=T(()=>w.value.map(a=>a.props.value)),C=b(!1);let B="",O;const L=T(()=>e.hideSelected?k.value.filter(a=>!w.value.some(n=>n===a)):k.value),y=b();function z(a){e.openOnClear&&(c.value=!0)}function j(){e.hideNoData&&!k.value.length||e.readonly||h!=null&&h.isReadonly.value||(c.value=!c.value)}function J(a){var t,f,v,m;if(e.readonly||h!=null&&h.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(c.value=!0),["Escape","Tab"].includes(a.key)&&(c.value=!1),a.key==="ArrowDown"?(t=y.value)==null||t.focus("next"):a.key==="ArrowUp"?(f=y.value)==null||f.focus("prev"):a.key==="Home"?(v=y.value)==null||v.focus("first"):a.key==="End"&&((m=y.value)==null||m.focus("last"));const n=1e3;function i(o){const p=o.key.length===1,d=!o.ctrlKey&&!o.metaKey&&!o.altKey;return p&&d}if(e.multiple||!i(a))return;const D=performance.now();D-O>n&&(B=""),B+=a.key.toLowerCase(),O=D;const P=k.value.find(o=>o.title.toLowerCase().startsWith(B));P!==void 0&&(s.value=[P])}function x(a){if(e.multiple){const n=_.value.findIndex(i=>e.valueComparator(i,a.value));if(n===-1)s.value=[...s.value,a];else{const i=[...s.value];i.splice(n,1),s.value=i}}else s.value=[a],c.value=!1}function W(a){var n;(n=y.value)!=null&&n.$el.contains(a.relatedTarget)||(c.value=!1)}function Y(a){C.value=!0}function q(a){var n;a.relatedTarget==null&&((n=I.value)==null||n.focus())}return de(()=>{const a=!!(e.chips||l.chip),n=!!(!e.hideNoData||L.value.length||l.prepend||l.append||l["no-data"]),i=s.value.length>0,[D]=U.filterProps(e),P=i||!C.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(U,g({ref:I},D,{modelValue:s.value.map(t=>t.props.value).join(", "),"onUpdate:modelValue":t=>{t==null&&(s.value=[])},focused:C.value,"onUpdate:focused":t=>C.value=t,validationValue:s.externalValue,dirty:i,class:["v-select",{"v-select--active-menu":c.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":s.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:P,"onClick:clear":z,"onMousedown:control":j,onBlur:W,onKeydown:J}),M(V({},l),{default:()=>r(xe,null,[r(Ce,g({ref:S,modelValue:c.value,"onUpdate:modelValue":t=>c.value=t,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[n&&r(he,{ref:y,selected:_.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:t=>t.preventDefault(),onFocusin:Y,onFocusout:q},{default:()=>{var t,f,v,m;return[!L.value.length&&!e.hideNoData&&((f=(t=l["no-data"])==null?void 0:t.call(l))!=null?f:r(K,{title:N(e.noDataText)},null)),(v=l["prepend-item"])==null?void 0:v.call(l),L.value.map((o,p)=>{var d;return l.item?(d=l.item)==null?void 0:d.call(l,{item:o,index:p,props:g(o.props,{onClick:()=>x(o)})}):r(K,g({key:p},o.props,{onClick:()=>x(o)}),{prepend:Q=>{let{isSelected:G}=Q;return e.multiple&&!e.hideSelected?r(ge,{modelValue:G,ripple:!1,tabindex:"-1"},null):void 0}})}),(m=l["append-item"])==null?void 0:m.call(l)]}})]}),w.value.map((t,f)=>{var o,p;function v(d){d.stopPropagation(),d.preventDefault(),x(t)}const m={"onClick:close":v,modelValue:!0,"onUpdate:modelValue":void 0};return r("div",{key:t.value,class:"v-select__selection"},[a?l.chip?r(fe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>{var d;return[(d=l.chip)==null?void 0:d.call(l,{item:t,index:f,props:m})]}}):r(we,g({key:"chip",closable:e.closableChips,size:"small",text:t.title},m),null):(p=(o=l.selection)==null?void 0:o.call(l,{item:t,index:f}))!=null?p:r("span",{class:"v-select__selection-text"},[t.title,e.multiple&&f<w.value.length-1&&r("span",{class:"v-select__selection-comma"},[De(",")])])])})])}))}),ne({isFocused:C,menu:c,select:x},I)}});export{Ue as V,Pe as m};
//# sourceMappingURL=VSelect-31041ca2.js.map
