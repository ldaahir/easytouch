var h=(S,y,f)=>new Promise((_,V)=>{var x=r=>{try{m(f.next(r))}catch(u){V(u)}},v=r=>{try{m(f.throw(r))}catch(u){V(u)}},m=r=>r.done?_(r.value):Promise.resolve(r.value).then(x,v);m((f=f.apply(S,y)).next())});import{_ as O}from"./AppTextField-9d8f30b5.js";import{f as g,I as U,J as j,K as t,k as e,P as o,u as s,Q as c,R as q,ac as $,q as k,G as E,H as G,$ as z}from"./frappe-ui-26ef7369.js";import{u as H}from"./useAppAbility-6a639c07.js";import{_ as K}from"./AuthProvider-e836c996.js";import{V as Q,t as L,i as W,o as N}from"./index-e1b913cd.js";import{u as C}from"./useGenerateImageVariant-8dfdbf90.js";import{a as X,b as Y,c as Z,d as ee}from"./auth-v2-login-illustration-light-d76bf8dc.js";import{m as te,a as ae}from"./misc-mask-light-eb104613.js";import{r as R}from"./validators-50c95554.js";import{b as D}from"./route-block-83d24a4e.js";import{V as A}from"./VImg-9de85dec.js";import{a as p,V as P}from"./VRow-a794fb6c.js";import{V as se,d as I}from"./VCard-98364713.js";import{V as oe}from"./VAlert-176826a5.js";import{V as le}from"./VForm-d2878bb6.js";import{V as re}from"./VCheckbox-ad265177.js";import{V as T}from"./VDivider-66cdee18.js";import"./VInput-ea621834.js";import"./transition-6a62c7af.js";import"./VTextField-ae5a2228.js";/* empty css                   */import"./VField-f7afb4c1.js";import"./easing-512405f0.js";import"./forwardRefs-bb5e4b03.js";import"./VCounter-b723ae3f.js";import"./index-61e4df1a.js";import"./VAvatar-7de7fc90.js";import"./VCheckboxBtn-fb30a6d7.js";import"./VSelectionControl-9d86a850.js";const ne={class:"position-relative bg-background rounded-lg w-100 ma-8 me-0"},ie={class:"d-flex align-center justify-center w-100 h-100"},me={class:"text-h5 mb-1"},ue={class:"text-capitalize"},ce=o("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),de=o("p",{class:"text-caption mb-2"},[c(" Admin Email: "),o("strong",null,"admin@demo.com"),c(" / Pass: "),o("strong",null,"admin")],-1),pe=o("p",{class:"text-caption mb-0"},[c(" Client Email: "),o("strong",null,"client@demo.com"),c(" / Pass: "),o("strong",null,"client")],-1),fe={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},_e=o("span",null,"New on our platform?",-1),ge=o("span",{class:"mx-4"},"or",-1),Ve={__name:"login",setup(S){const y=C(ee,Z,Y,X,!0),f=C(ae,te),_=g(!1),V=E(),x=G(),v=H(),m=g({email:void 0,password:void 0}),r=g(),u=g("administrator"),b=g("1234"),w=g(!1),B=(l,a)=>{let n={},d=0;for(let i in a[0])n[l[d]]=a[0][i],d++;return n},J=(l,a,n)=>h(this,null,function*(){return(yield N.get(l,{params:{filters:JSON.stringify(n),fields:JSON.stringify(a)}})).data.data}),F=()=>h(this,null,function*(){N.post("/api/method/login",{usr:u.value,pwd:b.value}).then(l=>h(this,null,function*(){if(l!==void 0){console.log("Login successful:",l);const a=yield J("/api/resource/User",["name","full_name","username","email","user_image","role_profile_name"],{username:u.value}),n=[{action:"manage",subject:"all"}],d=B(["id","fullName","username","email","avatar","role"],a);localStorage.setItem("userAbilities",JSON.stringify(n)),v.update(n);const i="40d9ab79d28e107.74b1cf4d358d2cb";localStorage.setItem("accessToken",JSON.stringify(i)),localStorage.setItem("userData",JSON.stringify(d)),x.replace(V.query.to?String(V.query.to):"/")}else m.value={email:"email or password is invalid",password:""}})).catch(l=>{m.value={email:"email or password is invalid",password:""},log(m)})}),M=()=>{var l;(l=r.value)==null||l.validate().then(({valid:a})=>{a&&F()})};return(l,a)=>{const n=O,d=z("RouterLink");return U(),j(P,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[e(p,{lg:"8",class:"d-none d-lg-flex"},{default:t(()=>[o("div",ne,[o("div",ie,[e(A,{"max-width":"505",src:s(y),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(A,{src:s(f),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(p,{cols:"12",lg:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[e(se,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[e(I,null,{default:t(()=>[e(s(Q),{nodes:s(L).app.logo,class:"mb-6"},null,8,["nodes"]),o("h5",me,[c(" Welcome to "),o("span",ue,q(s(L).app.title),1),c("! 👋🏻 ")]),ce]),_:1}),e(I,null,{default:t(()=>[e(oe,{color:"primary",variant:"tonal"},{default:t(()=>[de,pe]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(s(le),{ref_key:"refVForm",ref:r,onSubmit:$(M,["prevent"])},{default:t(()=>[e(P,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(n,{modelValue:s(u),"onUpdate:modelValue":a[0]||(a[0]=i=>k(u)?u.value=i:null),label:"Email",type:"text",autofocus:"",rules:[s(R)],"error-messages":s(m).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(n,{modelValue:s(b),"onUpdate:modelValue":a[1]||(a[1]=i=>k(b)?b.value=i:null),label:"Password",rules:[s(R)],type:s(_)?"text":"password","error-messages":s(m).password,"append-inner-icon":s(_)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=i=>_.value=!s(_))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),o("div",fe,[e(re,{modelValue:s(w),"onUpdate:modelValue":a[3]||(a[3]=i=>k(w)?w.value=i:null),label:"Remember me"},null,8,["modelValue"]),e(d,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:t(()=>[c(" Forgot Password? ")]),_:1})]),e(W,{block:"",type:"submit"},{default:t(()=>[c(" Login ")]),_:1})]),_:1}),e(p,{cols:"12",class:"text-center"},{default:t(()=>[_e,e(d,{class:"text-primary ms-2",to:{name:"register"}},{default:t(()=>[c(" Create an account ")]),_:1})]),_:1}),e(p,{cols:"12",class:"d-flex align-center"},{default:t(()=>[e(T),ge,e(T)]),_:1}),e(p,{cols:"12",class:"text-center"},{default:t(()=>[e(K)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof D=="function"&&D(Ve);export{Ve as default};
//# sourceMappingURL=login-3fa2bc2b.js.map
