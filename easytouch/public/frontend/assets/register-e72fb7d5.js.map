{"version":3,"file":"register-e72fb7d5.js","sources":["../../../../frontend/src/pages/register.vue"],"sourcesContent":["<script setup>\nimport { VForm } from 'vuetify/components/VForm'\nimport authV2RegisterIllustrationBorderedDark from '@images/pages/auth-v2-register-illustration-bordered-dark.png'\nimport authV2RegisterIllustrationBorderedLight from '@images/pages/auth-v2-register-illustration-bordered-light.png'\nimport authV2RegisterIllustrationDark from '@images/pages/auth-v2-register-illustration-dark.png'\nimport authV2RegisterIllustrationLight from '@images/pages/auth-v2-register-illustration-light.png'\nimport authV2MaskDark from '@images/pages/misc-mask-dark.png'\nimport authV2MaskLight from '@images/pages/misc-mask-light.png'\nimport { useAppAbility } from '@/plugins/casl/useAppAbility'\nimport AuthProvider from '@/views/pages/authentication/AuthProvider.vue'\nimport axios from '@axios'\nimport { useGenerateImageVariant } from '@core/composable/useGenerateImageVariant'\nimport { VNodeRenderer } from '@layouts/components/VNodeRenderer'\nimport { themeConfig } from '@themeConfig'\nimport {\n  alphaDashValidator,\n  emailValidator,\n  requiredValidator,\n} from '@validators'\n\nconst refVForm = ref()\nconst username = ref('johnDoe')\nconst email = ref('john@example.com')\nconst password = ref('john@VUEXY#123')\nconst privacyPolicies = ref(true)\n\n// Router\nconst route = useRoute()\nconst router = useRouter()\n\n// Ability\nconst ability = useAppAbility()\n\n// Form Errors\nconst errors = ref({\n  email: undefined,\n  password: undefined,\n})\n\nconst register = () => {\n  axios.post('/auth/register', {\n    username: username.value,\n    email: email.value,\n    password: password.value,\n  }).then(r => {\n    const { accessToken, userData, userAbilities } = r.data\n\n    localStorage.setItem('userAbilities', JSON.stringify(userAbilities))\n    ability.update(userAbilities)\n    localStorage.setItem('userData', JSON.stringify(userData))\n    localStorage.setItem('accessToken', JSON.stringify(accessToken))\n\n    // Redirect to `to` query if exist or redirect to index route\n    router.replace(route.query.to ? String(route.query.to) : '/')\n    \n    return null\n  }).catch(e => {\n    const { errors: formErrors } = e.response.data\n\n    errors.value = formErrors\n    console.error(e.response.data)\n  })\n}\n\nconst imageVariant = useGenerateImageVariant(authV2RegisterIllustrationLight, authV2RegisterIllustrationDark, authV2RegisterIllustrationBorderedLight, authV2RegisterIllustrationBorderedDark, true)\nconst authThemeMask = useGenerateImageVariant(authV2MaskLight, authV2MaskDark)\nconst isPasswordVisible = ref(false)\n\nconst onSubmit = () => {\n  refVForm.value?.validate().then(({ valid: isValid }) => {\n    if (isValid)\n      register()\n  })\n}\n</script>\n\n<template>\n  <VRow\n    no-gutters\n    class=\"auth-wrapper bg-surface\"\n  >\n    <VCol\n      lg=\"8\"\n      class=\"d-none d-lg-flex\"\n    >\n      <div class=\"position-relative bg-background rounded-lg w-100 ma-8 me-0\">\n        <div class=\"d-flex align-center justify-center w-100 h-100\">\n          <VImg\n            max-width=\"441\"\n            :src=\"imageVariant\"\n            class=\"auth-illustration mt-16 mb-2\"\n          />\n        </div>\n\n        <VImg\n          class=\"auth-footer-mask\"\n          :src=\"authThemeMask\"\n        />\n      </div>\n    </VCol>\n\n    <VCol\n      cols=\"12\"\n      lg=\"4\"\n      class=\"d-flex align-center justify-center\"\n    >\n      <VCard\n        flat\n        :max-width=\"500\"\n        class=\"mt-12 mt-sm-0 pa-4\"\n      >\n        <VCardText>\n          <VNodeRenderer\n            :nodes=\"themeConfig.app.logo\"\n            class=\"mb-6\"\n          />\n          <h5 class=\"text-h5 mb-1\">\n            Adventure starts here ðŸš€\n          </h5>\n          <p class=\"mb-0\">\n            Make your app management easy and fun!\n          </p>\n        </VCardText>\n\n        <VCardText>\n          <VForm\n            ref=\"refVForm\"\n            @submit.prevent=\"onSubmit\"\n          >\n            <VRow>\n              <!-- Username -->\n              <VCol cols=\"12\">\n                <AppTextField\n                  v-model=\"username\"\n                  autofocus\n                  :rules=\"[requiredValidator, alphaDashValidator]\"\n                  label=\"Username\"\n                />\n              </VCol>\n\n              <!-- email -->\n              <VCol cols=\"12\">\n                <AppTextField\n                  v-model=\"email\"\n                  :rules=\"[requiredValidator, emailValidator]\"\n                  label=\"Email\"\n                  type=\"email\"\n                />\n              </VCol>\n\n              <!-- password -->\n              <VCol cols=\"12\">\n                <AppTextField\n                  v-model=\"password\"\n                  :rules=\"[requiredValidator]\"\n                  label=\"Password\"\n                  :type=\"isPasswordVisible ? 'text' : 'password'\"\n                  :append-inner-icon=\"isPasswordVisible ? 'tabler-eye-off' : 'tabler-eye'\"\n                  @click:append-inner=\"isPasswordVisible = !isPasswordVisible\"\n                />\n\n                <div class=\"d-flex align-center mt-2 mb-4\">\n                  <VCheckbox\n                    id=\"privacy-policy\"\n                    v-model=\"privacyPolicies\"\n                    :rules=\"[requiredValidator]\"\n                    inline\n                  >\n                    <template #label>\n                      <span class=\"me-1\">\n                        I agree to\n                        <a\n                          href=\"javascript:void(0)\"\n                          class=\"text-primary\"\n                        >privacy policy & terms</a>\n                      </span>\n                    </template>\n                  </VCheckbox>\n                </div>\n\n                <VBtn\n                  block\n                  type=\"submit\"\n                >\n                  Sign up\n                </VBtn>\n              </VCol>\n\n              <!-- create account -->\n              <VCol\n                cols=\"12\"\n                class=\"text-center text-base\"\n              >\n                <span>Already have an account?</span>\n                <RouterLink\n                  class=\"text-primary ms-2\"\n                  :to=\"{ name: 'login' }\"\n                >\n                  Sign in instead\n                </RouterLink>\n              </VCol>\n\n              <VCol\n                cols=\"12\"\n                class=\"d-flex align-center\"\n              >\n                <VDivider />\n                <span class=\"mx-4\">or</span>\n                <VDivider />\n              </VCol>\n\n              <!-- auth providers -->\n              <VCol\n                cols=\"12\"\n                class=\"text-center\"\n              >\n                <AuthProvider />\n              </VCol>\n            </VRow>\n          </VForm>\n        </VCardText>\n      </VCard>\n    </VCol>\n  </VRow>\n</template>\n\n<style lang=\"scss\">\n@use \"@core/scss/template/pages/page-auth.scss\";\n</style>\n\n<route lang=\"yaml\">\nmeta:\n  layout: blank\n  action: read\n  subject: Auth\n  redirectIfLoggedIn: true\n</route>\n"],"names":["refVForm","ref","username","email","password","privacyPolicies","route","useRoute","router","useRouter","ability","useAppAbility","errors","register","axios","accessToken","userData","userAbilities","e","formErrors","imageVariant","useGenerateImageVariant","authV2RegisterIllustrationLight","authV2RegisterIllustrationDark","authV2RegisterIllustrationBorderedLight","authV2RegisterIllustrationBorderedDark","authThemeMask","authV2MaskLight","authV2MaskDark","isPasswordVisible","onSubmit","_a","isValid"],"mappings":"g0DAoBA,MAAAA,EAAAC,EAAA,EACAC,EAAAD,EAAA,SAAA,EACAE,EAAAF,EAAA,kBAAA,EACAG,EAAAH,EAAA,gBAAA,EACAI,EAAAJ,EAAA,EAAA,EAGAK,EAAAC,EAAA,EACAC,EAAAC,EAAA,EAGAC,EAAAC,EAAA,EAGAC,EAAAX,EAAA,CACA,MAAA,OACA,SAAA,MACA,CAAA,EAEAY,EAAA,IAAA,CACAC,EAAA,KAAA,iBAAA,CACA,SAAAZ,EAAA,MACA,MAAAC,EAAA,MACA,SAAAC,EAAA,KACA,CAAA,EAAA,KAAA,GAAA,CACA,KAAA,CAAA,YAAAW,EAAA,SAAAC,EAAA,cAAAC,CAAA,EAAA,EAAA,KAEA,oBAAA,QAAA,gBAAA,KAAA,UAAAA,CAAA,CAAA,EACAP,EAAA,OAAAO,CAAA,EACA,aAAA,QAAA,WAAA,KAAA,UAAAD,CAAA,CAAA,EACA,aAAA,QAAA,cAAA,KAAA,UAAAD,CAAA,CAAA,EAGAP,EAAA,QAAAF,EAAA,MAAA,GAAA,OAAAA,EAAA,MAAA,EAAA,EAAA,GAAA,EAEA,IACA,CAAA,EAAA,MAAAY,GAAA,CACA,KAAA,CAAA,OAAAC,CAAA,EAAAD,EAAA,SAAA,KAEAN,EAAA,MAAAO,EACA,QAAA,MAAAD,EAAA,SAAA,IAAA,CACA,CAAA,CACA,EAEAE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,EAAA,EACAC,EAAAL,EAAAM,EAAAC,CAAA,EACAC,EAAA5B,EAAA,EAAA,EAEA6B,EAAA,IAAA,QACAC,EAAA/B,EAAA,QAAA,MAAA+B,EAAA,WAAA,KAAA,CAAA,CAAA,MAAAC,KAAA,CACAA,GACAnB,EAAA,CACA,EACA"}