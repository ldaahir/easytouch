var O=Object.defineProperty;var b=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var w=(t,l,e)=>l in t?O(t,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[l]=e,K=(t,l)=>{for(var e in l||(l={}))S.call(l,e)&&w(t,e,l[e]);if(b)for(var e of b(l))x.call(l,e)&&w(t,e,l[e]);return t};import{a0 as A,a4 as C,aI as E}from"./index-e43e3799.js";import{c as P,f as L,w as B,u as j}from"./frappe-ui-b8f10d89.js";const Q=(t,l,e)=>t==null||l==null?-1:t.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),J=A({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function z(t,l,e){var d,u,g;const a=[],h=(d=e==null?void 0:e.default)!=null?d:Q,i=e!=null&&e.filterKeys?C(e.filterKeys):!1,f=Object.keys((u=e==null?void 0:e.customKeyFilter)!=null?u:{}).length;if(!(t!=null&&t.length))return a;e:for(let n=0;n<t.length;n++){const c=t[n],m={},s={};let r=-1;if(l&&!(e!=null&&e.noFilter)){if(typeof c=="object"){const I=i||Object.keys(c);for(const F of I){const k=E(c,F,c),v=(g=e==null?void 0:e.customKeyFilter)==null?void 0:g[F];if(r=v?v(k,l,c):h(k,l,c),r!==-1&&r!==!1)v?m[F]=r:s[F]=r;else if((e==null?void 0:e.filterMode)==="every")continue e}}else r=h(c,l,c),r!==-1&&r!==!1&&(s.title=r);const y=Object.keys(s).length,M=Object.keys(m).length;if(!y&&!M||(e==null?void 0:e.filterMode)==="union"&&M!==f&&!y||(e==null?void 0:e.filterMode)==="intersection"&&(M!==f||!y))continue}a.push({index:n,matches:K(K({},s),m)})}return a}function N(t,l,e,a){const h=P(()=>typeof(e==null?void 0:e.value)!="string"&&typeof(e==null?void 0:e.value)!="number"?"":String(e.value)),i=L([]),f=L(new Map);B(()=>{var n;i.value=[],f.value=new Map;const u=j(l);z(u,h.value,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:(n=j(a==null?void 0:a.filterKeys))!=null?n:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}).forEach(c=>{let{index:m,matches:s}=c;const r=u[m];i.value.push(r),f.value.set(r.value,s)})});function d(u){return f.value.get(u.value)}return{filteredItems:i,filteredMatches:f,getMatches:d}}export{J as m,N as u};
//# sourceMappingURL=filter-a01fa339.js.map
