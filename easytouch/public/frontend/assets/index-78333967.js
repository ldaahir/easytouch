var ce=Object.defineProperty,fe=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var Z=(w,n,r)=>n in w?ce(w,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):w[n]=r,T=(w,n)=>{for(var r in n||(n={}))_e.call(n,r)&&Z(w,r,n[r]);if(Y)for(var r of Y(n))ge.call(n,r)&&Z(w,r,n[r]);return w},ee=(w,n)=>fe(w,pe(n));import{_ as ie}from"./AppTextField-9d8f30b5.js";import{_ as ve}from"./DialogCloseBtn-e850c944.js";import{V as Q,a as Ve,b as we,d as I}from"./VCard-98364713.js";import{V as be}from"./VForm-d2878bb6.js";import{V as he}from"./VTable-9ad50ff9.js";import{V as F}from"./VCheckbox-ad265177.js";import{i as A,x as S,y as L,n as N,l as z,m as O,z as J,B as ae,D as ye,g as B,w as xe}from"./index-e1b913cd.js";import{V as Ue}from"./VDialog-288edafd.js";import{f as p,c as te,d as q,I as V,J as $,K as a,k as e,Q as x,R as y,u as l,q as k,P as s,L as D,M as j,N as W,T as K,w as Pe,$ as se,n as le}from"./frappe-ui-26ef7369.js";import{a as M,V as G}from"./VRow-a794fb6c.js";import{V as H}from"./VSpacer-1617770f.js";import{V as E}from"./VAvatar-7de7fc90.js";import{_ as ke}from"./AppSelect-6ee5ecd4.js";import{_ as Ce}from"./AddNewUserDrawer-ce07a93c.js";import{u as De}from"./useUserListStore-b32087f4.js";import{a as Re}from"./formatters-9ef7de78.js";import{V as $e}from"./VSelect-31041ca2.js";import{V as re}from"./VDivider-66cdee18.js";import{V as Me}from"./VDataTableServer-27407cd3.js";import{V as Ae}from"./VImg-9de85dec.js";import{V as Se}from"./VChip-a66962cb.js";import{V as Le}from"./VPagination-a5365db1.js";import{V as Ne}from"./VMenu-71a8a06d.js";import{V as ze,a as oe,b as ne}from"./VList-5632fe53.js";import"./VInput-ea621834.js";import"./transition-6a62c7af.js";import"./VTextField-ae5a2228.js";/* empty css                   */import"./VField-f7afb4c1.js";import"./easing-512405f0.js";import"./forwardRefs-bb5e4b03.js";import"./VCounter-b723ae3f.js";import"./VCheckboxBtn-fb30a6d7.js";import"./VSelectionControl-9d86a850.js";import"./VOverlay-3a4af559.js";import"./lazy-2551cdf3.js";import"./dialog-transition-40895cfb.js";import"./AppDrawerHeaderSection-eb6189d7.js";import"./validators-50c95554.js";import"./index-61e4df1a.js";import"./VNavigationDrawer-02c85ee6.js";import"./ssrBoot-2565eb67.js";import"./VDataTable-8cc9b7ce.js";import"./filter-80b4f4b8.js";const Be=s("p",{class:"text-base mb-0"}," Set Role Permissions ",-1),je=s("h6",{class:"text-h4 mt-8 mb-3"}," Role Permissions ",-1),Ie=s("td",null," Administrator Access ",-1),Ee={colspan:"3"},Te={class:"d-flex justify-end"},Fe={class:"d-flex justify-end"},Oe={class:"d-flex justify-end"},qe={class:"d-flex justify-end"},Qe={class:"d-flex align-center justify-center gap-3 mt-6"},Je={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(w,{emit:n}){const r=w,m=p([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),_=p(!1),U=p(""),b=p(),g=te(()=>{let u=0;return m.value.forEach(c=>{Object.entries(c).forEach(([C,P])=>{C!=="name"&&P&&u++})}),u}),i=te(()=>g.value>0&&g.value<m.value.length*3);q(_,u=>{m.value=m.value.map(c=>ee(T({},c),{read:u,write:u,create:u}))}),q(i,()=>{i.value||(_.value=!1)}),q(m,()=>{g.value===m.value.length*3&&(_.value=!0)},{deep:!0}),q(r,()=>{r.rolePermissions&&r.rolePermissions.permissions.length&&(U.value=r.rolePermissions.name,m.value=m.value.map(u=>{var C;const c=(C=r.rolePermissions)==null?void 0:C.permissions.find(P=>P.name===u.name);return c?T(T({},u),c):u}))});const d=()=>{var c;const u={name:U.value,permissions:m.value};n("update:rolePermissions",u),n("update:isDialogVisible",!1),_.value=!1,(c=b.value)==null||c.reset()},h=()=>{var u;n("update:isDialogVisible",!1),_.value=!1,(u=b.value)==null||u.reset()};return(u,c)=>{const C=ve,P=ie;return V(),$(Ue,{width:u.$vuetify.display.smAndDown?"auto":900,"model-value":r.isDialogVisible,"onUpdate:modelValue":h},{default:a(()=>[e(C,{onClick:h}),e(Q,{class:"pa-sm-8 pa-5"},{default:a(()=>[e(Ve,{class:"text-center"},{default:a(()=>[e(we,{class:"text-h3 mb-3"},{default:a(()=>[x(y(r.rolePermissions.name?"Edit":"Add New")+" Role ",1)]),_:1}),Be]),_:1}),e(I,{class:"mt-6"},{default:a(()=>[e(l(be),{ref_key:"refPermissionForm",ref:b},{default:a(()=>[e(P,{modelValue:l(U),"onUpdate:modelValue":c[0]||(c[0]=f=>k(U)?U.value=f:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),je,e(he,{class:"permission-table text-no-wrap"},{default:a(()=>[s("tr",null,[Ie,s("td",Ee,[s("div",Te,[e(F,{modelValue:l(_),"onUpdate:modelValue":c[1]||(c[1]=f=>k(_)?_.value=f:null),indeterminate:l(i),"onUpdate:indeterminate":c[2]||(c[2]=f=>k(i)?i.value=f:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(V(!0),D(j,null,W(l(m),f=>(V(),D("tr",{key:f.name},[s("td",null,y(f.name),1),s("td",null,[s("div",Fe,[e(F,{modelValue:f.read,"onUpdate:modelValue":R=>f.read=R,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[s("div",Oe,[e(F,{modelValue:f.write,"onUpdate:modelValue":R=>f.write=R,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),s("td",null,[s("div",qe,[e(F,{modelValue:f.create,"onUpdate:modelValue":R=>f.create=R,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),s("div",Qe,[e(A,{onClick:d},{default:a(()=>[x(" Submit ")]),_:1}),e(A,{color:"secondary",variant:"tonal",onClick:h},{default:a(()=>[x(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ke="/assets/easytouch/frontend/assets/avatar-10-eb77c9f7.png",We="/assets/easytouch/frontend/assets/avatar-9-3cdc7272.png",Ge="/assets/easytouch/frontend/assets/girl-using-mobile-26d497df.png",He={class:"v-avatar-group"},Xe={class:"text-h4"},Ye={class:"d-flex align-center"},Ze=["onClick"],ea=["src"],aa=s("span",null,"Add role, if it doesn't exist.",-1),ta={__name:"RoleCards",setup(w){const n=p([{role:"Administrator",users:[S,L,N,z],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[S,L,N,z,O,J,ae],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[S,L,N,z,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[S,L,N,z,O,J],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[S,L,N,z,O,J,ae,ye,We,Ke],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),r=p(!1),m=p(),_=p(!1),U=b=>{r.value=!0,m.value=b};return(b,g)=>{const i=Je;return V(),D(j,null,[e(G,null,{default:a(()=>[(V(!0),D(j,null,W(l(n),d=>(V(),$(M,{key:d.role,cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(Q,null,{default:a(()=>[e(I,{class:"d-flex align-center pb-1"},{default:a(()=>[s("span",null,"Total "+y(d.users.length)+" users",1),e(H),s("div",He,[(V(!0),D(j,null,W(d.users,(h,u)=>(V(),D(j,{key:h},[d.users.length>4&&d.users.length!==4&&u<3?(V(),$(E,{key:0,size:"36",image:h},null,8,["image"])):K("",!0),d.users.length===4?(V(),$(E,{key:1,size:"36",image:h},null,8,["image"])):K("",!0)],64))),128)),d.users.length>4?(V(),$(E,{key:0,color:b.$vuetify.theme.current.dark?"#4A5072":"#f6f6f7"},{default:a(()=>[s("span",null," +"+y(d.users.length-3),1)]),_:2},1032,["color"])):K("",!0)])]),_:2},1024),e(I,{class:"pb-5"},{default:a(()=>[s("h4",Xe,y(d.role),1),s("div",Ye,[s("a",{href:"javascript:void(0)",onClick:h=>U(d.details)}," Edit Role ",8,Ze),e(H),e(A,{icon:"",color:"disabled",variant:"text",size:"x-small"},{default:a(()=>[e(B,{size:"24",icon:"tabler-copy"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(M,{cols:"12",sm:"6",lg:"4"},{default:a(()=>[e(Q,{class:"h-100",ripple:!1,onClick:g[0]||(g[0]=d=>_.value=!0)},{default:a(()=>[e(G,{"no-gutters":"",class:"h-100"},{default:a(()=>[e(M,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:a(()=>[s("img",{width:"85",src:l(Ge)},null,8,ea)]),_:1}),e(M,{cols:"7"},{default:a(()=>[e(I,{class:"d-flex flex-column align-end justify-end gap-2 h-100",style:{"text-align":"end"}},{default:a(()=>[e(A,null,{default:a(()=>[x("Add New Role")]),_:1}),aa]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{"is-dialog-visible":l(_),"onUpdate:isDialogVisible":g[1]||(g[1]=d=>k(_)?_.value=d:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(i,{"is-dialog-visible":l(r),"onUpdate:isDialogVisible":g[2]||(g[2]=d=>k(r)?r.value=d:null),"role-permissions":l(m),"onUpdate:rolePermissions":g[3]||(g[3]=d=>k(m)?m.value=d:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}};const sa={class:"d-flex align-center flex-wrap gap-4"},la={class:"d-flex align-center"},ra={key:1},oa={class:"d-flex flex-column"},na={class:"text-body-1 font-weight-medium"},ia={class:"text-sm text-disabled"},da={class:"d-flex align-center gap-4"},ua={class:"text-capitalize"},ma={class:"text-capitalize font-weight-medium"},ca={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},fa={class:"text-sm text-disabled mb-0"},pa={__name:"UserList",setup(w){const n=De(),r=p(""),m=p(),_=p(),U=p(),b=p(0),g=p([]),i=p({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),d=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],h=()=>{n.fetchUsers({q:r.value,status:U.value,plan:_.value,role:m.value,options:i.value}).then(v=>{g.value=v.data.users,b.value=v.data.totalUsers,i.value.page=v.data.page}).catch(v=>{console.error(v)})};Pe(h);const u=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],c=v=>{const o=v.toLowerCase();return o==="subscriber"?{color:"primary",icon:"tabler-user"}:o==="author"?{color:"warning",icon:"tabler-settings"}:o==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:o==="editor"?{color:"info",icon:"tabler-pencil"}:o==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},C=v=>{const o=v.toLowerCase();return o==="pending"?"warning":o==="active"?"success":o==="inactive"?"secondary":"primary"},P=p(!1),f=v=>{n.addUser(v),h()},R=v=>{n.deleteUser(v),h()};return(v,o)=>{const de=ke,ue=ie,me=se("RouterLink"),X=se("IconBtn");return V(),D("section",null,[e(Q,null,{default:a(()=>[e(I,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(de,{"model-value":l(i).itemsPerPage,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{width:"5rem"},"onUpdate:modelValue":o[0]||(o[0]=t=>l(i).itemsPerPage=parseInt(t,10))},null,8,["model-value"]),e(H),s("div",sa,[e(ue,{modelValue:l(r),"onUpdate:modelValue":o[1]||(o[1]=t=>k(r)?r.value=t:null),placeholder:"Search User",density:"compact",style:{width:"12.5rem"}},null,8,["modelValue"]),e($e,{modelValue:l(m),"onUpdate:modelValue":o[2]||(o[2]=t=>k(m)?m.value=t:null),label:"Select Role",items:u,density:"compact",clearable:"","clear-icon":"tabler-x",style:{width:"10rem"}},null,8,["modelValue"])])]),_:1}),e(re),e(l(Me),{"items-per-page":l(i).itemsPerPage,"onUpdate:itemsPerPage":o[4]||(o[4]=t=>l(i).itemsPerPage=t),page:l(i).page,"onUpdate:page":o[5]||(o[5]=t=>l(i).page=t),items:l(g),"items-length":l(b),headers:d,class:"text-no-wrap","onUpdate:options":o[6]||(o[6]=t=>i.value=t)},{"item.user":a(({item:t})=>[s("div",la,[e(E,{size:"38",variant:t.raw.avatar?void 0:"tonal",color:t.raw.avatar?void 0:c(t.raw.role).color,class:"me-3"},{default:a(()=>[t.raw.avatar?(V(),$(Ae,{key:0,src:t.raw.avatar},null,8,["src"])):(V(),D("span",ra,y(l(Re)(t.raw.fullName)),1))]),_:2},1032,["variant","color"]),s("div",oa,[s("h6",na,[e(me,{to:{name:"apps-user-view-id",params:{id:t.raw.id}},class:"user-list-name"},{default:a(()=>[x(y(t.raw.fullName),1)]),_:2},1032,["to"])]),s("span",ia,y(t.raw.email),1)])])]),"item.role":a(({item:t})=>[s("div",da,[e(E,{size:"30",variant:"tonal",color:c(t.raw.role).color},{default:a(()=>[e(B,{size:"20",icon:c(t.raw.role).icon},null,8,["icon"])]),_:2},1032,["color"]),s("span",ua,y(t.raw.role),1)])]),"item.plan":a(({item:t})=>[s("span",ma,y(t.raw.currentPlan),1)]),"item.status":a(({item:t})=>[e(Se,{label:"",size:"small",class:"text-capitalize",color:C(t.raw.status)},{default:a(()=>[x(y(t.raw.status),1)]),_:2},1032,["color"])]),bottom:a(()=>[e(re),s("div",ca,[s("p",fa,y(l(xe)(l(i),l(b))),1),e(Le,{modelValue:l(i).page,"onUpdate:modelValue":o[3]||(o[3]=t=>l(i).page=t),length:Math.ceil(l(b)/l(i).itemsPerPage),"total-visible":v.$vuetify.display.xs?1:Math.ceil(l(b)/l(i).itemsPerPage)},{prev:a(t=>[e(A,le({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>[x(" Previous ")]),_:2},1040)]),next:a(t=>[e(A,le({variant:"tonal",color:"default"},t,{icon:!1}),{default:a(()=>[x(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.actions":a(({item:t})=>[e(X,null,{default:a(()=>[e(B,{icon:"tabler-edit"})]),_:1}),e(X,{onClick:va=>R(t.raw.id)},{default:a(()=>[e(B,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(A,{icon:"",color:"medium-emphasis",density:"comfortable",variant:"text"},{default:a(()=>[e(B,{size:"24",icon:"tabler-dots-vertical"}),e(Ne,{activator:"parent"},{default:a(()=>[e(ze,null,{default:a(()=>[e(oe,{to:{name:"apps-user-view-id",params:{id:t.raw.id}}},{default:a(()=>[e(ne,null,{default:a(()=>[x("View")]),_:1})]),_:2},1032,["to"]),e(oe,{link:""},{default:a(()=>[e(ne,null,{default:a(()=>[x("Suspend")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(Ce,{isDrawerOpen:l(P),"onUpdate:isDrawerOpen":o[7]||(o[7]=t=>k(P)?P.value=t:null),onUserData:f},null,8,["isDrawerOpen"])])}}},_a=s("h4",{class:"text-h4 mb-6"}," Roles List ",-1),ga=s("p",{class:"mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),dt={__name:"index",setup(w){return(n,r)=>(V(),$(G,null,{default:a(()=>[e(M,{cols:"12"},{default:a(()=>[_a,ga]),_:1}),e(M,{cols:"12"},{default:a(()=>[e(ta)]),_:1}),e(M,{cols:"12"},{default:a(()=>[e(pa)]),_:1})]),_:1}))}};export{dt as default};
//# sourceMappingURL=index-78333967.js.map
