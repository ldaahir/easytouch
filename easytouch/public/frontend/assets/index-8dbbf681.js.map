{"version":3,"file":"index-8dbbf681.js","sources":["../../../../frontend/src/pages/apps/user/list/index.vue"],"sourcesContent":["<script setup>\nimport { VDataTableServer } from 'vuetify/labs/VDataTable'\nimport { paginationMeta } from '@/@fake-db/utils'\nimport AddNewUserDrawer from '@/views/apps/user/list/AddNewUserDrawer.vue'\nimport { useUserListStore } from '@/views/apps/user/useUserListStore'\nimport { avatarText } from '@core/utils/formatters'\n\nconst userListStore = useUserListStore()\nconst searchQuery = ref('')\nconst selectedRole = ref()\nconst selectedPlan = ref()\nconst selectedStatus = ref()\nconst totalPage = ref(1)\nconst totalUsers = ref(0)\nconst users = ref([])\n\nconst options = ref({\n  page: 1,\n  itemsPerPage: 10,\n  sortBy: [],\n  groupBy: [],\n  search: undefined,\n})\n\n// Headers\nconst headers = [\n  {\n    title: 'User',\n    key: 'user',\n  },\n  {\n    title: 'Role',\n    key: 'role',\n  },\n  {\n    title: 'Plan',\n    key: 'plan',\n  },\n  {\n    title: 'Billing',\n    key: 'billing',\n  },\n  {\n    title: 'Status',\n    key: 'status',\n  },\n  {\n    title: 'Actions',\n    key: 'actions',\n    sortable: false,\n  },\n]\n\n// ðŸ‘‰ Fetching users\nconst fetchUsers = () => {\n  userListStore.fetchUsers({\n    q: searchQuery.value,\n    status: selectedStatus.value,\n    plan: selectedPlan.value,\n    role: selectedRole.value,\n    options: options.value,\n  }).then(response => {\n    users.value = response.data.users\n    totalPage.value = response.data.totalPage\n    totalUsers.value = response.data.totalUsers\n    options.value.page = response.data.page\n  }).catch(error => {\n    console.error(error)\n  })\n}\n\nwatchEffect(fetchUsers)\n\n// ðŸ‘‰ search filters\nconst roles = [\n  {\n    title: 'Admin',\n    value: 'admin',\n  },\n  {\n    title: 'Author',\n    value: 'author',\n  },\n  {\n    title: 'Editor',\n    value: 'editor',\n  },\n  {\n    title: 'Maintainer',\n    value: 'maintainer',\n  },\n  {\n    title: 'Subscriber',\n    value: 'subscriber',\n  },\n]\n\nconst plans = [\n  {\n    title: 'Basic',\n    value: 'basic',\n  },\n  {\n    title: 'Company',\n    value: 'company',\n  },\n  {\n    title: 'Enterprise',\n    value: 'enterprise',\n  },\n  {\n    title: 'Team',\n    value: 'team',\n  },\n]\n\nconst status = [\n  {\n    title: 'Pending',\n    value: 'pending',\n  },\n  {\n    title: 'Active',\n    value: 'active',\n  },\n  {\n    title: 'Inactive',\n    value: 'inactive',\n  },\n]\n\nconst resolveUserRoleVariant = role => {\n  const roleLowerCase = role.toLowerCase()\n  if (roleLowerCase === 'subscriber')\n    return {\n      color: 'warning',\n      icon: 'tabler-circle-check',\n    }\n  if (roleLowerCase === 'author')\n    return {\n      color: 'success',\n      icon: 'tabler-user',\n    }\n  if (roleLowerCase === 'maintainer')\n    return {\n      color: 'primary',\n      icon: 'tabler-chart-pie-2',\n    }\n  if (roleLowerCase === 'editor')\n    return {\n      color: 'info',\n      icon: 'tabler-edit',\n    }\n  if (roleLowerCase === 'admin')\n    return {\n      color: 'secondary',\n      icon: 'tabler-device-laptop',\n    }\n  \n  return {\n    color: 'primary',\n    icon: 'tabler-user',\n  }\n}\n\nconst resolveUserStatusVariant = stat => {\n  const statLowerCase = stat.toLowerCase()\n  if (statLowerCase === 'pending')\n    return 'warning'\n  if (statLowerCase === 'active')\n    return 'success'\n  if (statLowerCase === 'inactive')\n    return 'secondary'\n  \n  return 'primary'\n}\n\nconst isAddNewUserDrawerVisible = ref(false)\n\nconst addNewUser = userData => {\n  userListStore.addUser(userData)\n\n  // refetch User\n  fetchUsers()\n}\n\n// ðŸ‘‰ List\nconst userListMeta = [\n  {\n    icon: 'tabler-user',\n    color: 'primary',\n    title: 'Session',\n    stats: '21,459',\n    percentage: +29,\n    subtitle: 'Total Users',\n  },\n  {\n    icon: 'tabler-user-plus',\n    color: 'error',\n    title: 'Paid Users',\n    stats: '4,567',\n    percentage: +18,\n    subtitle: 'Last week analytics',\n  },\n  {\n    icon: 'tabler-user-check',\n    color: 'success',\n    title: 'Active Users',\n    stats: '19,860',\n    percentage: -14,\n    subtitle: 'Last week analytics',\n  },\n  {\n    icon: 'tabler-user-exclamation',\n    color: 'warning',\n    title: 'Pending Users',\n    stats: '237',\n    percentage: +42,\n    subtitle: 'Last week analytics',\n  },\n]\n\nconst deleteUser = id => {\n  userListStore.deleteUser(id)\n\n  // refetch User\n  fetchUsers()\n}\n</script>\n\n<template>\n  <section>\n    <VRow>\n      <VCol\n        v-for=\"meta in userListMeta\"\n        :key=\"meta.title\"\n        cols=\"12\"\n        sm=\"6\"\n        lg=\"3\"\n      >\n        <VCard>\n          <VCardText class=\"d-flex justify-space-between\">\n            <div>\n              <span>{{ meta.title }}</span>\n              <div class=\"d-flex align-center gap-2 my-1\">\n                <h6 class=\"text-h4\">\n                  {{ meta.stats }}\n                </h6>\n                <span :class=\"meta.percentage > 0 ? 'text-success' : 'text-error'\">( {{ meta.percentage > 0 ? '+' : '' }} {{ meta.percentage }}%)</span>\n              </div>\n              <span>{{ meta.subtitle }}</span>\n            </div>\n\n            <VAvatar\n              rounded\n              variant=\"tonal\"\n              :color=\"meta.color\"\n              :icon=\"meta.icon\"\n            />\n          </VCardText>\n        </VCard>\n      </VCol>\n\n      <VCol cols=\"12\">\n        <VCard title=\"Search Filter\">\n          <!-- ðŸ‘‰ Filters -->\n          <VCardText>\n            <VRow>\n              <!-- ðŸ‘‰ Select Role -->\n              <VCol\n                cols=\"12\"\n                sm=\"4\"\n              >\n                <AppSelect\n                  v-model=\"selectedRole\"\n                  label=\"Select Role\"\n                  :items=\"roles\"\n                  clearable\n                  clear-icon=\"tabler-x\"\n                />\n              </VCol>\n              <!-- ðŸ‘‰ Select Plan -->\n              <VCol\n                cols=\"12\"\n                sm=\"4\"\n              >\n                <AppSelect\n                  v-model=\"selectedPlan\"\n                  label=\"Select Plan\"\n                  :items=\"plans\"\n                  clearable\n                  clear-icon=\"tabler-x\"\n                />\n              </VCol>\n              <!-- ðŸ‘‰ Select Status -->\n              <VCol\n                cols=\"12\"\n                sm=\"4\"\n              >\n                <AppSelect\n                  v-model=\"selectedStatus\"\n                  label=\"Select Status\"\n                  :items=\"status\"\n                  clearable\n                  clear-icon=\"tabler-x\"\n                />\n              </VCol>\n            </VRow>\n          </VCardText>\n\n          <VDivider />\n\n          <VCardText class=\"d-flex flex-wrap py-4 gap-4\">\n            <div class=\"me-3 d-flex gap-3\">\n              <AppSelect\n                :model-value=\"options.itemsPerPage\"\n                :items=\"[\n                  { value: 10, title: '10' },\n                  { value: 25, title: '25' },\n                  { value: 50, title: '50' },\n                  { value: 100, title: '100' },\n                  { value: -1, title: 'All' },\n                ]\"\n                style=\"width: 6.25rem;\"\n                @update:model-value=\"options.itemsPerPage = parseInt($event, 10)\"\n              />\n            </div>\n            <VSpacer />\n\n            <div class=\"app-user-search-filter d-flex align-center flex-wrap gap-4\">\n              <!-- ðŸ‘‰ Search  -->\n              <div style=\"inline-size: 10rem;\">\n                <AppTextField\n                  v-model=\"searchQuery\"\n                  placeholder=\"Search\"\n                  density=\"compact\"\n                />\n              </div>\n\n              <!-- ðŸ‘‰ Export button -->\n              <VBtn\n                variant=\"tonal\"\n                color=\"secondary\"\n                prepend-icon=\"tabler-screen-share\"\n              >\n                Export\n              </VBtn>\n\n              <!-- ðŸ‘‰ Add user button -->\n              <VBtn\n                prepend-icon=\"tabler-plus\"\n                @click=\"isAddNewUserDrawerVisible = true\"\n              >\n                Add New User\n              </VBtn>\n            </div>\n          </VCardText>\n\n          <VDivider />\n\n          <!-- SECTION datatable -->\n          <VDataTableServer\n            v-model:items-per-page=\"options.itemsPerPage\"\n            v-model:page=\"options.page\"\n            :items=\"users\"\n            :items-length=\"totalUsers\"\n            :headers=\"headers\"\n            class=\"text-no-wrap\"\n            @update:options=\"options = $event\"\n          >\n            <!-- User -->\n            <template #item.user=\"{ item }\">\n              <div class=\"d-flex align-center\">\n                <VAvatar\n                  size=\"34\"\n                  :variant=\"!item.raw.avatar ? 'tonal' : undefined\"\n                  :color=\"!item.raw.avatar ? resolveUserRoleVariant(item.raw.role).color : undefined\"\n                  class=\"me-3\"\n                >\n                  <VImg\n                    v-if=\"item.raw.avatar\"\n                    :src=\"item.raw.avatar\"\n                  />\n                  <span v-else>{{ avatarText(item.raw.fullName) }}</span>\n                </VAvatar>\n\n                <div class=\"d-flex flex-column\">\n                  <h6 class=\"text-base\">\n                    <RouterLink\n                      :to=\"{ name: 'apps-user-view-id', params: { id: item.raw.id } }\"\n                      class=\"font-weight-medium user-list-name\"\n                    >\n                      {{ item.raw.fullName }}\n                    </RouterLink>\n                  </h6>\n\n                  <span class=\"text-sm text-medium-emphasis\">@{{ item.raw.email }}</span>\n                </div>\n              </div>\n            </template>\n\n            <!-- ðŸ‘‰ Role -->\n            <template #item.role=\"{ item }\">\n              <div class=\"d-flex align-center gap-4\">\n                <VAvatar\n                  :size=\"30\"\n                  :color=\"resolveUserRoleVariant(item.raw.role).color\"\n                  variant=\"tonal\"\n                >\n                  <VIcon\n                    :size=\"20\"\n                    :icon=\"resolveUserRoleVariant(item.raw.role).icon\"\n                  />\n                </VAvatar>\n                <span class=\"text-capitalize\">{{ item.raw.role }}</span>\n              </div>\n            </template>\n\n            <!-- Plan -->\n            <template #item.plan=\"{ item }\">\n              <span class=\"text-capitalize font-weight-medium\">{{ item.raw.currentPlan }}</span>\n            </template>\n\n            <!-- Status -->\n            <template #item.status=\"{ item }\">\n              <VChip\n                :color=\"resolveUserStatusVariant(item.raw.status)\"\n                size=\"small\"\n                label\n                class=\"text-capitalize\"\n              >\n                {{ item.raw.status }}\n              </VChip>\n            </template>\n\n            <!-- Actions -->\n            <template #item.actions=\"{ item }\">\n              <IconBtn @click=\"deleteUser(item.raw.id)\">\n                <VIcon icon=\"tabler-trash\" />\n              </IconBtn>\n\n              <IconBtn>\n                <VIcon icon=\"tabler-edit\" />\n              </IconBtn>\n\n              <VBtn\n                icon\n                variant=\"text\"\n                size=\"small\"\n                color=\"medium-emphasis\"\n              >\n                <VIcon\n                  size=\"24\"\n                  icon=\"tabler-dots-vertical\"\n                />\n\n                <VMenu activator=\"parent\">\n                  <VList>\n                    <VListItem :to=\"{ name: 'apps-user-view-id', params: { id: item.raw.id } }\">\n                      <template #prepend>\n                        <VIcon icon=\"tabler-eye\" />\n                      </template>\n\n                      <VListItemTitle>View</VListItemTitle>\n                    </VListItem>\n\n                    <VListItem link>\n                      <template #prepend>\n                        <VIcon icon=\"tabler-pencil\" />\n                      </template>\n                      <VListItemTitle>Edit</VListItemTitle>\n                    </VListItem>\n\n                    <VListItem @click=\"deleteUser(item.raw.id)\">\n                      <template #prepend>\n                        <VIcon icon=\"tabler-trash\" />\n                      </template>\n                      <VListItemTitle>Delete</VListItemTitle>\n                    </VListItem>\n                  </VList>\n                </VMenu>\n              </VBtn>\n            </template>\n\n            <!-- pagination -->\n            <template #bottom>\n              <VDivider />\n              <div class=\"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3\">\n                <p class=\"text-sm text-disabled mb-0\">\n                  {{ paginationMeta(options, totalUsers) }}\n                </p>\n\n                <VPagination\n                  v-model=\"options.page\"\n                  :length=\"Math.ceil(totalUsers / options.itemsPerPage)\"\n                  :total-visible=\"$vuetify.display.xs ? 1 : Math.ceil(totalUsers / options.itemsPerPage)\"\n                >\n                  <template #prev=\"slotProps\">\n                    <VBtn\n                      variant=\"tonal\"\n                      color=\"default\"\n                      v-bind=\"slotProps\"\n                      :icon=\"false\"\n                    >\n                      Previous\n                    </VBtn>\n                  </template>\n\n                  <template #next=\"slotProps\">\n                    <VBtn\n                      variant=\"tonal\"\n                      color=\"default\"\n                      v-bind=\"slotProps\"\n                      :icon=\"false\"\n                    >\n                      Next\n                    </VBtn>\n                  </template>\n                </VPagination>\n              </div>\n            </template>\n          </VDataTableServer>\n          <!-- SECTION -->\n        </VCard>\n\n        <!-- ðŸ‘‰ Add New User -->\n        <AddNewUserDrawer\n          v-model:isDrawerOpen=\"isAddNewUserDrawerVisible\"\n          @user-data=\"addNewUser\"\n        />\n      </vcol>\n    </vrow>\n  </section>\n</template>\n\n<style lang=\"scss\">\n.app-user-search-filter {\n  inline-size: 31.6rem;\n}\n\n.text-capitalize {\n  text-transform: capitalize;\n}\n\n.user-list-name:not(:hover) {\n  color: rgba(var(--v-theme-on-background), var(--v-medium-emphasis-opacity));\n}\n</style>\n"],"names":["userListStore","useUserListStore","searchQuery","ref","selectedRole","selectedPlan","selectedStatus","totalPage","totalUsers","users","options","headers","fetchUsers","response","error","watchEffect","roles","plans","status","resolveUserRoleVariant","role","roleLowerCase","resolveUserStatusVariant","stat","statLowerCase","isAddNewUserDrawerVisible","addNewUser","userData","userListMeta","deleteUser","id"],"mappings":"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"}