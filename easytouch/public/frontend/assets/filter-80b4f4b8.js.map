{"version":3,"file":"filter-80b4f4b8.js","sources":["../../../../frontend/node_modules/vuetify/lib/composables/filter.mjs"],"sourcesContent":["/* eslint-disable max-statements */\n/* eslint-disable no-labels */\n// Utilities\nimport { getPropertyFromItem, propsFactory, wrapInArray } from \"../util/index.mjs\";\nimport { computed, ref, unref, watchEffect } from 'vue';\n\n// Types\n\n// Composables\nexport const defaultFilter = (value, query, item) => {\n  if (value == null || query == null) return -1;\n  return value.toString().toLocaleLowerCase().indexOf(query.toString().toLocaleLowerCase());\n};\nexport const makeFilterProps = propsFactory({\n  customFilter: Function,\n  customKeyFilter: Object,\n  filterKeys: [Array, String],\n  filterMode: {\n    type: String,\n    default: 'intersection'\n  },\n  noFilter: Boolean\n}, 'filter');\nexport function filterItems(items, query, options) {\n  const array = [];\n  // always ensure we fall back to a functioning filter\n  const filter = options?.default ?? defaultFilter;\n  const keys = options?.filterKeys ? wrapInArray(options.filterKeys) : false;\n  const customFiltersLength = Object.keys(options?.customKeyFilter ?? {}).length;\n  if (!items?.length) return array;\n  loop: for (let i = 0; i < items.length; i++) {\n    const item = items[i];\n    const customMatches = {};\n    const defaultMatches = {};\n    let match = -1;\n    if (query && !options?.noFilter) {\n      if (typeof item === 'object') {\n        const filterKeys = keys || Object.keys(item);\n        for (const key of filterKeys) {\n          const value = getPropertyFromItem(item, key, item);\n          const keyFilter = options?.customKeyFilter?.[key];\n          match = keyFilter ? keyFilter(value, query, item) : filter(value, query, item);\n          if (match !== -1 && match !== false) {\n            if (keyFilter) customMatches[key] = match;else defaultMatches[key] = match;\n          } else if (options?.filterMode === 'every') {\n            continue loop;\n          }\n        }\n      } else {\n        match = filter(item, query, item);\n        if (match !== -1 && match !== false) {\n          defaultMatches.title = match;\n        }\n      }\n      const defaultMatchesLength = Object.keys(defaultMatches).length;\n      const customMatchesLength = Object.keys(customMatches).length;\n      if (!defaultMatchesLength && !customMatchesLength) continue;\n      if (options?.filterMode === 'union' && customMatchesLength !== customFiltersLength && !defaultMatchesLength) continue;\n      if (options?.filterMode === 'intersection' && (customMatchesLength !== customFiltersLength || !defaultMatchesLength)) continue;\n    }\n    array.push({\n      index: i,\n      matches: {\n        ...defaultMatches,\n        ...customMatches\n      }\n    });\n  }\n  return array;\n}\nexport function useFilter(props, items, query, options) {\n  const strQuery = computed(() => typeof query?.value !== 'string' && typeof query?.value !== 'number' ? '' : String(query.value));\n  const filteredItems = ref([]);\n  const filteredMatches = ref(new Map());\n  watchEffect(() => {\n    filteredItems.value = [];\n    filteredMatches.value = new Map();\n    const transformedItems = unref(items);\n    const results = filterItems(transformedItems, strQuery.value, {\n      customKeyFilter: props.customKeyFilter,\n      default: props.customFilter,\n      filterKeys: unref(options?.filterKeys) ?? props.filterKeys,\n      filterMode: props.filterMode,\n      noFilter: props.noFilter\n    });\n    results.forEach(_ref => {\n      let {\n        index,\n        matches\n      } = _ref;\n      const item = transformedItems[index];\n      filteredItems.value.push(item);\n      filteredMatches.value.set(item.value, matches);\n    });\n  });\n  function getMatches(item) {\n    return filteredMatches.value.get(item.value);\n  }\n  return {\n    filteredItems,\n    filteredMatches,\n    getMatches\n  };\n}\n//# sourceMappingURL=filter.mjs.map"],"names":["defaultFilter","value","query","item","makeFilterProps","propsFactory","filterItems","items","options","array","filter","_a","keys","wrapInArray","customFiltersLength","_b","loop","i","customMatches","defaultMatches","match","filterKeys","key","getPropertyFromItem","keyFilter","_c","defaultMatchesLength","customMatchesLength","__spreadValues","useFilter","props","strQuery","computed","filteredItems","ref","filteredMatches","watchEffect","transformedItems","unref","_ref","index","matches","getMatches"],"mappings":"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","x_google_ignoreList":[0]}