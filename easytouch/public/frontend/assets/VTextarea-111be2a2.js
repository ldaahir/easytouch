var ue=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var G=(e,n,a)=>n in e?ue(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,V=(e,n)=>{for(var a in n||(n={}))E.call(n,a)&&G(e,a,n[a]);if(F)for(var a of F(n))U.call(n,a)&&G(e,a,n[a]);return e},S=(e,n)=>re(e,ie(n));var b=(e,n)=>{var a={};for(var l in e)E.call(e,l)&&n.indexOf(l)<0&&(a[l]=e[l]);if(e!=null&&F)for(var l of F(e))n.indexOf(l)<0&&U.call(e,l)&&(a[l]=e[l]);return a};import{c as B,f as h,A as se,d as y,v as ce,k as i,n as M,M as N,X as O,a6 as de,al as fe,B as _}from"./frappe-ui-26ef7369.js";/* empty css                   */import{m as ve,f as me,V as xe}from"./VField-f7afb4c1.js";import{m as ge,u as Ve,a as $}from"./VInput-ea621834.js";import{I as he}from"./VImg-9de85dec.js";import{f as ye}from"./forwardRefs-bb5e4b03.js";import{J as we,Y as Ce,T as Fe,Z as Pe,b0 as Ie,Q as ke,a_ as Re}from"./index-e1b913cd.js";import{V as Se}from"./VCounter-b723ae3f.js";const De=we()({name:"VTextarea",directives:{Intersect:he},inheritAttrs:!1,props:V(V({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object},ge()),ve()),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:l,slots:c}=n;const s=Ce(e,"modelValue"),{isFocused:m,focus:j,blur:J}=Ve(e),Q=B(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),X=B(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function Y(t,u){var o,r;!e.autofocus||!t||(r=(o=u[0].target)==null?void 0:o.focus)==null||r.call(o)}const p=h(),w=h(),H=h(""),C=h(),Z=B(()=>m.value||e.persistentPlaceholder);function P(){var t;C.value!==document.activeElement&&((t=C.value)==null||t.focus()),m.value||j()}function q(t){P(),l("click:control",t)}function K(t){l("mousedown:control",t)}function L(t){t.stopPropagation(),P(),_(()=>{s.value="",Ie(e["onClick:clear"],t)})}function W(t){var o;const u=t.target;if(s.value=u.value,(o=e.modelModifiers)!=null&&o.trim){const r=[u.selectionStart,u.selectionEnd];_(()=>{u.selectionStart=r[0],u.selectionEnd=r[1]})}}const f=h();function v(){e.autoGrow&&_(()=>{if(!f.value||!w.value)return;const t=getComputedStyle(f.value),u=getComputedStyle(w.value.$el),o=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),r=f.value.scrollHeight,I=parseFloat(t.lineHeight),k=Math.max(parseFloat(e.rows)*I+o,parseFloat(u.getPropertyValue("--v-input-control-height"))),R=parseFloat(e.maxRows)*I+o||1/0;H.value=ke(Re(r!=null?r:0,k,R))})}se(v),y(s,v),y(()=>e.rows,v),y(()=>e.maxRows,v),y(()=>e.density,v);let d;return y(f,t=>{t?(d=new ResizeObserver(v),d.observe(f.value)):d==null||d.disconnect()}),ce(()=>{d==null||d.disconnect()}),Fe(()=>{const t=!!(c.counter||e.counter||e.counterValue),u=!!(t||c.details),[o,r]=Pe(a),[be]=$.filterProps(e),T=be,{modelValue:I}=T,k=b(T,["modelValue"]),[R]=me(e);return i($,M({ref:p,modelValue:s.value,"onUpdate:modelValue":x=>s.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)},e.class],style:e.style},o,k,{focused:m.value}),S(V({},c),{default:x=>{let{isDisabled:g,isDirty:z,isReadonly:ee,isValid:te}=x;return i(xe,M({ref:w,style:{"--v-textarea-control-height":H.value},onClick:q,onMousedown:K,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},R,{active:Z.value||z.value,dirty:z.value||e.dirty,disabled:g.value,focused:m.value,error:te.value===!1}),S(V({},c),{default:ae=>{let{props:le}=ae,D=le,{class:A}=D,ne=b(D,["class"]);return i(N,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),O(i("textarea",M({ref:C,class:A,value:s.value,onInput:W,autofocus:e.autofocus,readonly:ee.value,disabled:g.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:P,onBlur:J},ne,r),null),[[de("intersect"),{handler:Y},null,{once:!0}]]),e.autoGrow&&O(i("textarea",{class:[A,"v-textarea__sizer"],"onUpdate:modelValue":oe=>s.value=oe,ref:f,readonly:!0,"aria-hidden":"true"},null),[[fe,s.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}}))},details:u?x=>{var g;return i(N,null,[(g=c.details)==null?void 0:g.call(c,x),t&&i(N,null,[i("span",null,null),i(Se,{active:e.persistentCounter||m.value,value:Q.value,max:X.value},c.counter)])])}:void 0}))}),ye({},p,w,C)}});export{De as V};
//# sourceMappingURL=VTextarea-111be2a2.js.map
