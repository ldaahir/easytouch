{"version":3,"file":"index-654ad772.js","sources":["../../../../frontend/src/components/dialogs/AddEditPermissionDialog.vue","../../../../frontend/src/pages/apps/permissions/index.vue"],"sourcesContent":["<script setup>\nconst props = defineProps({\n  isDialogVisible: {\n    type: Boolean,\n    required: true,\n  },\n  permissionName: {\n    type: String,\n    required: false,\n    default: '',\n  },\n})\n\nconst emit = defineEmits([\n  'update:isDialogVisible',\n  'update:permissionName',\n])\n\nconst permissionName = ref('')\n\nconst onReset = () => {\n  emit('update:isDialogVisible', false)\n  permissionName.value = ''\n}\n\nconst onSubmit = () => {\n  emit('update:isDialogVisible', false)\n  emit('update:permissionName', permissionName.value)\n}\n\nwatch(props, () => {\n  permissionName.value = props.permissionName\n})\n</script>\n\n<template>\n  <VDialog\n    :width=\"$vuetify.display.smAndDown ? 'auto' : 600\"\n    :model-value=\"props.isDialogVisible\"\n    @update:model-value=\"onReset\"\n  >\n    <!-- ðŸ‘‰ dialog close btn -->\n    <DialogCloseBtn @click=\"onReset\" />\n\n    <VCard class=\"pa-sm-8 pa-5\">\n      <!-- ðŸ‘‰ Title -->\n      <VCardItem class=\"text-center\">\n        <VCardTitle class=\"text-h5\">\n          {{ props.permissionName ? 'Edit' : 'Add' }} Permission\n        </VCardTitle>\n        <VCardSubtitle>\n          {{ props.permissionName ? 'Edit' : 'Add' }}  permission as per your requirements.\n        </VCardSubtitle>\n      </VCardItem>\n\n      <VCardText class=\"mt-1\">\n        <!-- ðŸ‘‰ Form -->\n        <VForm>\n          <VAlert\n            type=\"warning\"\n            title=\"Warning!\"\n            variant=\"tonal\"\n            class=\"mb-6\"\n          >\n            By editing the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding.\n          </VAlert>\n\n          <!-- ðŸ‘‰ Role name -->\n          <div class=\"d-flex align-end gap-3 mb-3\">\n            <AppTextField\n              v-model=\"permissionName\"\n              density=\"compact\"\n              label=\"Permission Name\"\n              placeholder=\"Enter Permission Name\"\n            />\n\n            <VBtn @click=\"onSubmit\">\n              Update\n            </VBtn>\n          </div>\n\n          <VCheckbox label=\"Set as core permission\" />\n        </VForm>\n      </VCardText>\n    </VCard>\n  </VDialog>\n</template>\n\n<style lang=\"scss\">\n.permission-table {\n  td {\n    border-block-end: 1px solid rgba(var(--v-border-color), var(--v-border-opacity));\n    padding-block: 0.5rem;\n    padding-inline: 0;\n  }\n}\n</style>\n","<script setup>\nimport { VDataTableServer } from 'vuetify/labs/VDataTable'\nimport { paginationMeta } from '@/@fake-db/utils'\nimport axios from '@axios'\n\nconst headers = [\n  {\n    title: 'Name',\n    key: 'name',\n  },\n  {\n    title: 'Assigned To',\n    key: 'assignedTo',\n    sortable: false,\n  },\n  {\n    title: 'Created Date',\n    key: 'createdDate',\n    sortable: false,\n  },\n  {\n    title: 'Actions',\n    key: 'actions',\n    sortable: false,\n  },\n]\n\nconst permissions = ref([])\nconst search = ref('')\nconst totalPermissions = ref(0)\n\nconst options = ref({\n  page: 1,\n  itemsPerPage: 10,\n  sortBy: [],\n  groupBy: [],\n  search: undefined,\n})\n\nconst isPermissionDialogVisible = ref(false)\nconst isAddPermissionDialogVisible = ref(false)\nconst permissionName = ref('')\nconst totalPages = ref(1)\n\nconst colors = {\n  'support': {\n    color: 'info',\n    text: 'Support',\n  },\n  'users': {\n    color: 'success',\n    text: 'Users',\n  },\n  'manager': {\n    color: 'warning',\n    text: 'Manager',\n  },\n  'administrator': {\n    color: 'primary',\n    text: 'Administrator',\n  },\n  'restricted-user': {\n    color: 'error',\n    text: 'Restricted User',\n  },\n}\n\nconst fetchPermissions = () => {\n  axios.get('/apps/permissions/data', {\n    params: {\n      q: search.value,\n      options: options.value,\n    },\n  }).then(response => {\n    permissions.value = response.data.permissions\n    totalPermissions.value = response.data.totalPermissions\n    totalPages.value = response.data.totalPages\n  }).catch(error => {\n    console.log(error)\n  })\n}\n\nonMounted(fetchPermissions)\nwatchEffect(fetchPermissions)\n\nconst editPermission = name => {\n  isPermissionDialogVisible.value = true\n  permissionName.value = name\n}\n</script>\n\n<template>\n  <VRow>\n    <VCol cols=\"12\">\n      <h5 class=\"text-h4 mb-6\">\n        Permissions List\n      </h5>\n      <p class=\"mb-0\">\n        Each category (Basic, Professional, and Business) includes the four predefined roles shown below.\n      </p>\n    </VCol>\n\n    <VCol cols=\"12\">\n      <VCard>\n        <VCardText class=\"d-flex align-center justify-space-between flex-wrap gap-4\">\n          <AppSelect\n            :model-value=\"options.itemsPerPage\"\n            :items=\"[\n              { value: 10, title: '10' },\n              { value: 25, title: '25' },\n              { value: 50, title: '50' },\n              { value: 100, title: '100' },\n              { value: -1, title: 'All' },\n            ]\"\n            style=\"width: 5rem;\"\n            @update:model-value=\"options.itemsPerPage = parseInt($event, 10)\"\n          />\n\n          <div class=\"d-flex align-center gap-4 flex-wrap\">\n            <AppTextField\n              v-model=\"search\"\n              placeholder=\"Search\"\n              density=\"compact\"\n              style=\"width: 12.5rem;\"\n            />\n            <VBtn\n              density=\"default\"\n              @click=\"isAddPermissionDialogVisible = true\"\n            >\n              Add Permission\n            </VBtn>\n          </div>\n        </VCardText>\n\n        <VDivider />\n\n        <VDataTableServer\n          v-model:items-per-page=\"options.itemsPerPage\"\n          v-model:page=\"options.page\"\n          :items-length=\"totalPermissions\"\n          :headers=\"headers\"\n          :items=\"permissions\"\n          class=\"text-medium-emphasis text-no-wrap\"\n          @update:options=\"options = $event\"\n        >\n          <!-- Assigned To -->\n          <template #item.assignedTo=\"{ item }\">\n            <!-- {{ item.raw.assignedTo }} -->\n            <div class=\"d-flex gap-2\">\n              <VChip\n                v-for=\"text in item.raw.assignedTo\"\n                :key=\"text\"\n                label\n                :color=\"colors[text].color\"\n                class=\"font-weight-medium\"\n              >\n                {{ colors[text].text }}\n              </VChip>\n            </div>\n          </template>\n\n          <template #bottom>\n            <VDivider />\n\n            <div class=\"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3\">\n              <p class=\"text-sm text-medium-emphasis mb-0\">\n                {{ paginationMeta(options, totalPermissions) }}\n              </p>\n\n              <VPagination\n                v-model=\"options.page\"\n                :length=\"totalPages\"\n              />\n            </div>\n          </template>\n\n          <template #item.createdDate=\"{ item }\">\n            <span>{{ item.raw.createdDate }}</span>\n          </template>\n\n          <!-- Actions -->\n          <template #item.actions=\"{ item }\">\n            <VBtn\n              icon\n              size=\"small\"\n              color=\"medium-emphasis\"\n              variant=\"text\"\n              @click=\"editPermission(item.raw.name)\"\n            >\n              <VIcon\n                size=\"22\"\n                icon=\"tabler-edit\"\n              />\n            </VBtn>\n            <VBtn\n              icon\n              size=\"small\"\n              variant=\"text\"\n              color=\"medium-emphasis\"\n            >\n              <VIcon\n                size=\"22\"\n                icon=\"tabler-trash\"\n              />\n            </VBtn>\n          </template>\n        </VDataTableServer>\n      </VCard>\n\n      <AddEditPermissionDialog\n        v-model:isDialogVisible=\"isPermissionDialogVisible\"\n        v-model:permission-name=\"permissionName\"\n      />\n      <AddEditPermissionDialog v-model:isDialogVisible=\"isAddPermissionDialogVisible\" />\n    </VCol>\n  </VRow>\n</template>\n"],"names":["permissionName","ref","onReset","emit","onSubmit","watch","props","headers","permissions","search","totalPermissions","options","isPermissionDialogVisible","isAddPermissionDialogVisible","totalPages","colors","fetchPermissions","axios","response","error","onMounted","watchEffect","editPermission","name"],"mappings":"+uDAkBAA,EAAAC,EAAA,EAAA,EAEAC,EAAA,IAAA,CACAC,EAAA,yBAAA,EAAA,EACAH,EAAA,MAAA,EACA,EAEAI,EAAA,IAAA,CACAD,EAAA,yBAAA,EAAA,EACAA,EAAA,wBAAAH,EAAA,KAAA,CACA,EAEA,OAAAK,EAAAC,EAAA,IAAA,CACAN,EAAA,MAAAM,EAAA,cACA,CAAA,8gDC3BA,MAAAC,EAAA,CACA,CACA,MAAA,OACA,IAAA,MACA,EACA,CACA,MAAA,cACA,IAAA,aACA,SAAA,EACA,EACA,CACA,MAAA,eACA,IAAA,cACA,SAAA,EACA,EACA,CACA,MAAA,UACA,IAAA,UACA,SAAA,EACA,CACA,EAEAC,EAAAP,EAAA,EAAA,EACAQ,EAAAR,EAAA,EAAA,EACAS,EAAAT,EAAA,CAAA,EAEAU,EAAAV,EAAA,CACA,KAAA,EACA,aAAA,GACA,OAAA,CAAA,EACA,QAAA,CAAA,EACA,OAAA,MACA,CAAA,EAEAW,EAAAX,EAAA,EAAA,EACAY,EAAAZ,EAAA,EAAA,EACAD,EAAAC,EAAA,EAAA,EACAa,EAAAb,EAAA,CAAA,EAEAc,EAAA,CACA,QAAA,CACA,MAAA,OACA,KAAA,SACA,EACA,MAAA,CACA,MAAA,UACA,KAAA,OACA,EACA,QAAA,CACA,MAAA,UACA,KAAA,SACA,EACA,cAAA,CACA,MAAA,UACA,KAAA,eACA,EACA,kBAAA,CACA,MAAA,QACA,KAAA,iBACA,CACA,EAEAC,EAAA,IAAA,CACAC,EAAA,IAAA,yBAAA,CACA,OAAA,CACA,EAAAR,EAAA,MACA,QAAAE,EAAA,KACA,CACA,CAAA,EAAA,KAAAO,GAAA,CACAV,EAAA,MAAAU,EAAA,KAAA,YACAR,EAAA,MAAAQ,EAAA,KAAA,iBACAJ,EAAA,MAAAI,EAAA,KAAA,UACA,CAAA,EAAA,MAAAC,GAAA,CACA,QAAA,IAAAA,CAAA,CACA,CAAA,CACA,EAEAC,EAAAJ,CAAA,EACAK,EAAAL,CAAA,EAEA,MAAAM,EAAAC,GAAA,CACAX,EAAA,MAAA,GACAZ,EAAA,MAAAuB,CACA"}