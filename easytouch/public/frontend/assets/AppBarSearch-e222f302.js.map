{"version":3,"file":"AppBarSearch-e222f302.js","sources":["../../../../frontend/src/@core/components/AppBarSearch.vue"],"sourcesContent":["<script setup>\nimport { PerfectScrollbar } from 'vue3-perfect-scrollbar'\nimport {\n  VList,\n  VListItem,\n  VListSubheader,\n} from 'vuetify/components/VList'\n\nconst props = defineProps({\n  isDialogVisible: {\n    type: Boolean,\n    required: true,\n  },\n  searchQuery: {\n    type: String,\n    required: true,\n  },\n  searchResults: {\n    type: Array,\n    required: true,\n  },\n  suggestions: {\n    type: Array,\n    required: false,\n  },\n  noDataSuggestion: {\n    type: Array,\n    required: false,\n  },\n})\n\nconst emit = defineEmits([\n  'update:isDialogVisible',\n  'update:searchQuery',\n  'itemSelected',\n])\n\nconst { ctrl_k, meta_k } = useMagicKeys({\n  passive: false,\n  onEventFired(e) {\n    if (e.ctrlKey && e.key === 'k' && e.type === 'keydown')\n      e.preventDefault()\n  },\n})\n\nconst refSearchList = ref()\nconst searchQuery = ref(structuredClone(toRaw(props.searchQuery)))\nconst refSearchInput = ref()\nconst isLocalDialogVisible = ref(structuredClone(toRaw(props.isDialogVisible)))\nconst searchResults = ref(structuredClone(toRaw(props.searchResults)))\n\n// ðŸ‘‰ Watching props change\nwatch(props, () => {\n  isLocalDialogVisible.value = structuredClone(toRaw(props.isDialogVisible))\n  searchResults.value = structuredClone(toRaw(props.searchResults))\n  searchQuery.value = structuredClone(toRaw(props.searchQuery))\n})\nwatch([\n  ctrl_k,\n  meta_k,\n], () => {\n  isLocalDialogVisible.value = true\n  emit('update:isDialogVisible', true)\n})\n\n// ðŸ‘‰ clear search result and close the dialog\nconst clearSearchAndCloseDialog = () => {\n  emit('update:isDialogVisible', false)\n  emit('update:searchQuery', '')\n}\n\nwatchEffect(() => {\n  if (!searchQuery.value.length)\n    searchResults.value = []\n})\n\nconst getFocusOnSearchList = e => {\n  if (e.key === 'ArrowDown') {\n    e.preventDefault()\n    refSearchList.value?.focus('next')\n  } else if (e.key === 'ArrowUp') {\n    e.preventDefault()\n    refSearchList.value?.focus('prev')\n  }\n}\n\nconst dialogModelValueUpdate = val => {\n  emit('update:isDialogVisible', val)\n  emit('update:searchQuery', '')\n}\n\nconst resolveCategories = val => {\n  if (val === 'dashboards')\n    return 'Dashboards'\n  if (val === 'appsPages')\n    return 'Apps & Pages'\n  if (val === 'userInterface')\n    return 'User Interface'\n  if (val === 'formsTables')\n    return 'Forms Tables'\n  if (val === 'chartsMisc')\n    return 'Charts Misc'\n  \n  return 'Misc'\n}\n</script>\n\n<template>\n  <VDialog\n    max-width=\"600\"\n    :model-value=\"isLocalDialogVisible\"\n    :height=\"$vuetify.display.smAndUp ? '550' : '100%'\"\n    :fullscreen=\"$vuetify.display.width < 600\"\n    class=\"app-bar-search-dialog\"\n    @update:model-value=\"dialogModelValueUpdate\"\n    @keyup.esc=\"clearSearchAndCloseDialog\"\n  >\n    <VCard\n      height=\"100%\"\n      width=\"100%\"\n      class=\"position-relative\"\n    >\n      <VCardText\n        class=\"pt-1\"\n        style=\"min-block-size: 65px;\"\n      >\n        <!-- ðŸ‘‰ Search Input -->\n        <VTextField\n          ref=\"refSearchInput\"\n          v-model=\"searchQuery\"\n          autofocus\n          density=\"comfortable\"\n          variant=\"plain\"\n          class=\"app-bar-autocomplete-box\"\n          @keyup.esc=\"clearSearchAndCloseDialog\"\n          @keydown=\"getFocusOnSearchList\"\n          @update:model-value=\"$emit('update:searchQuery', searchQuery)\"\n        >\n          <!-- ðŸ‘‰ Prepend Inner -->\n          <template #prepend-inner>\n            <div class=\"d-flex align-center text-high-emphasis me-1\">\n              <VIcon\n                size=\"22\"\n                icon=\"tabler-search\"\n                class=\"mt-1\"\n                style=\"opacity: 1;\"\n              />\n            </div>\n          </template>\n\n          <!-- ðŸ‘‰ Append Inner -->\n          <template #append-inner>\n            <div class=\"d-flex align-center\">\n              <div\n                class=\"text-base text-disabled cursor-pointer me-1\"\n                @click=\"clearSearchAndCloseDialog\"\n              >\n                [esc]\n              </div>\n\n              <IconBtn\n                size=\"small\"\n                @click=\"clearSearchAndCloseDialog\"\n              >\n                <VIcon icon=\"tabler-x\" />\n              </IconBtn>\n            </div>\n          </template>\n        </VTextField>\n      </VCardText>\n\n      <!-- ðŸ‘‰ Divider -->\n      <VDivider />\n\n      <!-- ðŸ‘‰ Perfect Scrollbar -->\n      <PerfectScrollbar\n        :options=\"{ wheelPropagation: false, suppressScrollX: true }\"\n        class=\"h-100\"\n      >\n        <!-- ðŸ‘‰ Search List -->\n        <VList\n          v-show=\"searchQuery.length && !!searchResults.length\"\n          ref=\"refSearchList\"\n          density=\"compact\"\n          class=\"app-bar-search-list\"\n        >\n          <!-- ðŸ‘‰ list Item /List Sub header -->\n          <template\n            v-for=\"item in searchResults\"\n            :key=\"item.title\"\n          >\n            <VListSubheader\n              v-if=\"'header' in item\"\n              class=\"text-disabled\"\n            >\n              {{ resolveCategories(item.title) }}\n            </VListSubheader>\n\n            <template v-else>\n              <slot\n                name=\"searchResult\"\n                :item=\"item\"\n              >\n                <VListItem\n                  link\n                  @click=\"$emit('itemSelected', item)\"\n                >\n                  <template #prepend>\n                    <VIcon\n                      size=\"20\"\n                      :icon=\"item.icon\"\n                      class=\"me-3\"\n                    />\n                  </template>\n\n                  <template #append>\n                    <VIcon\n                      size=\"20\"\n                      icon=\"tabler-corner-down-left\"\n                      class=\"enter-icon text-disabled\"\n                    />\n                  </template>\n\n                  <VListItemTitle>\n                    {{ item.title }}\n                  </VListItemTitle>\n                </VListItem>\n              </slot>\n            </template>\n          </template>\n        </VList>\n\n        <!-- ðŸ‘‰ Suggestions -->\n        <div\n          v-show=\"!!searchResults && !searchQuery\"\n          class=\"h-100\"\n        >\n          <slot name=\"suggestions\">\n            <VCardText class=\"app-bar-search-suggestions h-100 pa-10\">\n              <VRow\n                v-if=\"props.suggestions\"\n                class=\"gap-y-4\"\n              >\n                <VCol\n                  v-for=\"suggestion in props.suggestions\"\n                  :key=\"suggestion.title\"\n                  cols=\"12\"\n                  sm=\"6\"\n                  class=\"ps-6\"\n                >\n                  <p class=\"text-xs text-disabled text-uppercase\">\n                    {{ suggestion.title }}\n                  </p>\n\n                  <VList class=\"card-list\">\n                    <VListItem\n                      v-for=\"item in suggestion.content\"\n                      :key=\"item.title\"\n                      link\n                      :title=\"item.title\"\n                      class=\"app-bar-search-suggestion\"\n                      @click=\"$emit('itemSelected', item)\"\n                    >\n                      <template #prepend>\n                        <VIcon\n                          :icon=\"item.icon\"\n                          size=\"20\"\n                          class=\"me-2\"\n                        />\n                      </template>\n                    </VListItem>\n                  </VList>\n                </VCol>\n              </VRow>\n            </VCardText>\n          </slot>\n        </div>\n\n        <!-- ðŸ‘‰ No Data found -->\n        <div\n          v-show=\"!searchResults.length && searchQuery.length\"\n          class=\"h-100\"\n        >\n          <slot name=\"noData\">\n            <VCardText class=\"h-100\">\n              <div class=\"app-bar-search-suggestions d-flex flex-column align-center justify-center text-high-emphasis h-100\">\n                <VIcon\n                  size=\"75\"\n                  icon=\"tabler-file-x\"\n                />\n                <div class=\"d-flex align-center flex-wrap justify-center gap-2 text-h6 my-3\">\n                  <span>No Result For </span>\n                  <span>\"{{ searchQuery }}\"</span>\n                </div>\n                <div\n                  v-if=\"props.noDataSuggestion\"\n                  class=\"mt-8\"\n                >\n                  <span class=\"d-flex justify-center text-disabled\">Try searching for</span>\n                  <h6\n                    v-for=\"suggestion in props.noDataSuggestion\"\n                    :key=\"suggestion.title\"\n                    class=\"app-bar-search-suggestion text-sm font-weight-regular cursor-pointer mt-3\"\n                    @click=\"$emit('itemSelected', suggestion)\"\n                  >\n                    <VIcon\n                      size=\"20\"\n                      :icon=\"suggestion.icon\"\n                      class=\"me-3\"\n                    />\n                    <span class=\"text-sm\">{{ suggestion.title }}</span>\n                  </h6>\n                </div>\n              </div>\n            </VCardText>\n          </slot>\n        </div>\n      </PerfectScrollbar>\n    </VCard>\n  </VDialog>\n</template>\n\n<style lang=\"scss\">\n.app-bar-search-suggestions {\n  .app-bar-search-suggestion {\n    &:hover {\n      color: rgb(var(--v-theme-primary));\n    }\n  }\n}\n\n.app-bar-autocomplete-box {\n  .v-field__input {\n    padding-block-end: 0.425rem;\n    padding-block-start: 1.16rem;\n  }\n\n  .v-field__append-inner,\n  .v-field__prepend-inner {\n    padding-block-start: 0.95rem;\n  }\n\n  .v-field__field input {\n    text-align: start !important;\n  }\n}\n\n.app-bar-search-dialog {\n  .v-overlay__scrim {\n    backdrop-filter: blur(4px);\n  }\n\n  .v-list-item-title {\n    font-size: 0.875rem !important;\n  }\n\n  .app-bar-search-list {\n    .v-list-item,\n    .v-list-subheader {\n      font-size: 0.75rem;\n      padding-inline: 1.5rem !important;\n    }\n\n    .v-list-item {\n      .v-list-item__append {\n        .enter-icon {\n          visibility: hidden;\n        }\n      }\n\n      &:hover,\n      &:active,\n      &:focus {\n        .v-list-item__append {\n          .enter-icon {\n            visibility: visible;\n          }\n        }\n      }\n    }\n\n    .v-list-subheader {\n      line-height: 1;\n      min-block-size: auto;\n      padding-block: 0.6875rem 0.3125rem;\n      text-transform: uppercase;\n    }\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.card-list {\n  --v-card-list-gap: 16px;\n}\n</style>\n"],"names":["ctrl_k","meta_k","useMagicKeys","refSearchList","ref","searchQuery","toRaw","props","refSearchInput","isLocalDialogVisible","searchResults","watch","emit","clearSearchAndCloseDialog","watchEffect","getFocusOnSearchList","_a","_b","dialogModelValueUpdate","val","resolveCategories"],"mappings":"22DAqCA,CAAA,OAAAA,EAAA,OAAAC,CAAA,EAAAC,EAAA,CACA,QAAA,GACA,aAAA,EAAA,CACA,EAAA,SAAA,EAAA,MAAA,KAAA,EAAA,OAAA,WACA,EAAA,eAAA,CACA,CACA,CAAA,EAEAC,EAAAC,EAAA,EACAC,EAAAD,EAAA,gBAAAE,EAAAC,EAAA,WAAA,CAAA,CAAA,EACAC,EAAAJ,EAAA,EACAK,EAAAL,EAAA,gBAAAE,EAAAC,EAAA,eAAA,CAAA,CAAA,EACAG,EAAAN,EAAA,gBAAAE,EAAAC,EAAA,aAAA,CAAA,CAAA,EAGAI,EAAAJ,EAAA,IAAA,CACAE,EAAA,MAAA,gBAAAH,EAAAC,EAAA,eAAA,CAAA,EACAG,EAAA,MAAA,gBAAAJ,EAAAC,EAAA,aAAA,CAAA,EACAF,EAAA,MAAA,gBAAAC,EAAAC,EAAA,WAAA,CAAA,CACA,CAAA,EACAI,EAAA,CACAX,EACAC,CACA,EAAA,IAAA,CACAQ,EAAA,MAAA,GACAG,EAAA,yBAAA,EAAA,CACA,CAAA,EAGA,MAAAC,EAAA,IAAA,CACAD,EAAA,yBAAA,EAAA,EACAA,EAAA,qBAAA,EAAA,CACA,EAEAE,EAAA,IAAA,CACAT,EAAA,MAAA,SACAK,EAAA,MAAA,CAAA,EACA,CAAA,EAEA,MAAAK,EAAA,GAAA,SACA,EAAA,MAAA,aACA,EAAA,eAAA,GACAC,EAAAb,EAAA,QAAA,MAAAa,EAAA,MAAA,SACA,EAAA,MAAA,YACA,EAAA,eAAA,GACAC,EAAAd,EAAA,QAAA,MAAAc,EAAA,MAAA,QAEA,EAEAC,EAAAC,GAAA,CACAP,EAAA,yBAAAO,CAAA,EACAP,EAAA,qBAAA,EAAA,CACA,EAEAQ,EAAAD,GACAA,IAAA,aACA,aACAA,IAAA,YACA,eACAA,IAAA,gBACA,iBACAA,IAAA,cACA,eACAA,IAAA,aACA,cAEA"}